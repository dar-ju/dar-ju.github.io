import{d as T,r as p,o as C,a as g,c as b,b as e,u as r,F as I,e as L,n as $,f as M,g as q,w as x,t as h,h as y,v as F,i as E,j as N,k as j,l as O,T as D,m as V,p as Z}from"./index-BD8PT7q7.js";const A=[{id:1,name:"Fall Limited Edition Sneakers",brand:"Sneaker Company",description:"These low-profile sneakers are your perfect casual wear companion. Featuring a durable rubber outer sole, theyâ€™ll withstand everything the weather can offer.",newPrice:125,oldPrice:250,stock:999,images:{imageProduct1:"./assets/images/image-product-1.jpg",imageProduct2:"./assets/images/image-product-2.jpg",imageProduct3:"./assets/images/image-product-3.jpg",imageProduct4:"./assets/images/image-product-4.jpg"},thumbnails:{thumbnailProduct1:"./assets/images/image-product-1-thumbnail.jpg",thumbnailProduct2:"./assets/images/image-product-2-thumbnail.jpg",thumbnailProduct3:"./assets/images/image-product-3-thumbnail.jpg",thumbnailProduct4:"./assets/images/image-product-4-thumbnail.jpg"}}],B=async d=>{try{return A.find(s=>s.id===d)}catch(t){throw new Error(`product response was not ok, error: ${t}`)}},S=T("product",()=>{const d=p({}),t=p(0),s=p(!1),a=p(d.value.quantity);return{product:d,getProduct:async _=>{const w=await B(_);d.value=w},showLightbox:s,activeImage:t,stockLeft:a}}),H={class:"lightbox",role:"dialog"},z={class:"lightbox__wrapper"},U=["src","alt"],G={class:"lightbox__thumbnails"},J=["onClick"],K=["src","alt"],Q={__name:"LightboxComponent",props:{images:{type:Object,required:!1}},setup(d){const t=S(),s=p([]),a=p(0),m=p(null);C(()=>{for(let l=0;l<Object.keys(d.images.images).length;l++)l===t.activeImage?s.value.push({active:!0}):s.value.push({active:!1});a.value=t.activeImage});const _=l=>{l>=s.value.length||l<0||(s.value.forEach(n=>{n.active=!1}),s.value[l].active=!0,a.value=l)},w=()=>{t.showLightbox=!1};return(()=>{M(()=>{var l;(l=m.value)==null||l.focus()})})(),(l,n)=>(g(),b("div",H,[e("div",z,[e("img",{class:"lightbox__image",src:r(t).product.images[`imageProduct${a.value+1}`],alt:`${d.images.name} main foto`},null,8,U),e("ul",G,[(g(!0),b(I,null,L(s.value,(v,c)=>(g(),b("li",{key:c,onClick:P=>_(c),class:$([{"lightbox-selected":s.value[c].active},"lightbox__thumbnail"])},[e("button",null,[e("img",{class:$(["lightbox__thumbnail-image",{"lightbox-selected-image":s.value[c].active}]),src:r(t).product.thumbnails[`thumbnailProduct${c+1}`],alt:`${r(t).product.name} thumbnail ${c+1}`},null,10,K)])],10,J))),128))]),e("button",{onClick:n[0]||(n[0]=v=>_(a.value-1)),class:"lightbox__image-arrow lightbox__image-arrow_prev",ref_key:"focusOnElement",ref:m},n[4]||(n[4]=[e("svg",{class:"lightbox__nav-icon",width:"12",height:"18",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M11 1 3 9l8 8","stroke-width":"3",fill:"none","fill-rule":"evenodd"})],-1)]),512),e("button",{onClick:n[1]||(n[1]=v=>_(a.value+1)),class:"lightbox__image-arrow lightbox__image-arrow_next"},n[5]||(n[5]=[e("svg",{class:"lightbox__nav-icon",width:"13",height:"18",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"m2 1 8 8-8 8","stroke-width":"3",fill:"none","fill-rule":"evenodd"})],-1)])),e("button",{onClick:n[2]||(n[2]=v=>w()),class:"lightbox__image-close"},n[6]||(n[6]=[e("svg",{class:"lightbox__close-icon",width:"25",height:"25",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"m11.596.782 2.122 2.122L9.12 7.499l4.597 4.597-2.122 2.122L7 9.62l-4.595 4.597-2.122-2.122L4.878 7.5.282 2.904 2.404.782l4.595 4.596L11.596.782Z","fill-rule":"evenodd",transform:"scale(1.5)"})],-1)]))]),e("div",{onClick:n[3]||(n[3]=v=>w()),class:"lightbox__overlay"})]))}},R={class:"container product"},W={class:"section product__wrapper"},X={class:"product__images"},Y=["src","alt"],tt={class:"product__thumbnails"},et=["onClick"],ot=["src","alt"],st={class:"product__info"},at={class:"product__brand"},rt={class:"product__title"},nt={class:"product__description"},it={class:"product__price-group"},lt={class:"product__new-price"},ct={class:"product__discount"},ut={class:"product__old-price"},dt={class:"product__cart-form"},pt={class:"product__cart-input-group"},mt={__name:"ProductComponent",setup(d){const t=S(),s=q(),a=p(0),m=p({}),_=p({});C(async()=>{await t.getProduct(1),m.value=t.product.images,_.value=t.product.thumbnails,s.price=t.product.newPrice,s.name=t.product.name});const w=()=>{t.showLightbox=!0},k=i=>{i>=Object.keys(m.value).length||i<0||(t.activeImage=i)},l=()=>Math.round(100/(t.product.oldPrice/t.product.newPrice)),n=i=>{i?a.value++:a.value--,a.value<0&&(a.value=0),v()},v=()=>{a.value>t.product.stock&&(a.value=t.product.stock)},c=i=>new Intl.NumberFormat("en",{style:"currency",currency:"USD"}).format(i),P=()=>{if(a.value===0)return;const i=s.cart.findIndex(o=>o.id===t.product.id);if(i!=-1){const o=a.value+s.cart[i].quantity;if(o>t.product.stock)return;s.cart[i].quantity=o,s.totalInCart=o,s.cart[i].total=c(t.product.newPrice*s.cart[i].quantity)}else s.cartAdd({id:t.product.id,image:t.product.thumbnails.thumbnailProduct1,name:t.product.name,price:c(t.product.newPrice),quantity:a.value,total:c(t.product.newPrice*a.value)});a.value=0};return(i,o)=>(g(),b("div",R,[e("div",W,[e("div",X,[e("a",{class:"product__link-image",onClick:o[0]||(o[0]=x(u=>w(),["prevent"])),href:"","aria-controls":"lightbox","aria-haspopup":"dialog"},[e("img",{class:"product__image",src:m.value[`imageProduct${r(t).activeImage+1}`],alt:`${r(t).product.name} main foto`},null,8,Y)]),e("button",{onClick:o[1]||(o[1]=u=>k(r(t).activeImage-1)),class:"product__image-arrow product__image-arrow_prev","aria-label":"Previous image"},o[9]||(o[9]=[e("svg",{class:"product__nav-icon",width:"12",height:"18",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M11 1 3 9l8 8","stroke-width":"3",fill:"none","fill-rule":"evenodd"})],-1)])),e("button",{onClick:o[2]||(o[2]=u=>k(r(t).activeImage+1)),class:"product__image-arrow product__image-arrow_next","aria-label":"Next image"},o[10]||(o[10]=[e("svg",{class:"product__nav-icon",width:"13",height:"18",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"m2 1 8 8-8 8","stroke-width":"3",fill:"none","fill-rule":"evenodd"})],-1)])),e("ul",tt,[(g(!0),b(I,null,L(m.value,(u,gt,f)=>(g(),b("li",{class:$(["product__thumbnail",{selected:r(t).activeImage===f}]),key:f,onClick:_t=>k(f)},[e("button",null,[e("img",{class:$(["product__thumbnail-image",{"selected-image":r(t).activeImage===f}]),src:u,alt:`${r(t).product.name} thumbnail ${f}`},null,10,ot)])],10,et))),128))])]),e("div",st,[e("span",at,h(r(t).product.brand),1),e("h1",rt,h(r(t).product.name),1),e("p",nt,h(r(t).product.description),1),e("div",it,[e("span",lt,h(c(r(t).product.newPrice)),1),e("span",ct,h(l())+"%",1),e("span",ut,h(c(r(t).product.oldPrice)),1)]),e("form",dt,[e("div",pt,[y(e("input",{onInput:o[3]||(o[3]=u=>v()),onChange:o[4]||(o[4]=u=>a.value<0?a.value=0:a.value),"onUpdate:modelValue":o[5]||(o[5]=u=>a.value=u),type:"number",class:"product__cart-input"},null,544),[[F,a.value]]),e("button",{onClick:o[6]||(o[6]=x(u=>n(!1),["prevent"])),class:"product__cart-button product__cart-button_minus","aria-label":"Decrease product"}," - "),e("button",{onClick:o[7]||(o[7]=x(u=>n(!0),["prevent"])),class:"product__cart-button product__cart-button_plus","aria-label":"Increase product"}," + ")]),e("button",{onClick:o[8]||(o[8]=x(u=>P(),["prevent"])),class:"btn product__cart-add"},o[11]||(o[11]=[e("svg",{class:"product__cart-icon",width:"22",height:"20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M20.925 3.641H3.863L3.61.816A.896.896 0 0 0 2.717 0H.897a.896.896 0 1 0 0 1.792h1l1.031 11.483c.073.828.52 1.726 1.291 2.336C2.83 17.385 4.099 20 6.359 20c1.875 0 3.197-1.87 2.554-3.642h4.905c-.642 1.77.677 3.642 2.555 3.642a2.72 2.72 0 0 0 2.717-2.717 2.72 2.72 0 0 0-2.717-2.717H6.365c-.681 0-1.274-.41-1.53-1.009l14.321-.842a.896.896 0 0 0 .817-.677l1.821-7.283a.897.897 0 0 0-.87-1.114ZM6.358 18.208a.926.926 0 0 1 0-1.85.926.926 0 0 1 0 1.85Zm10.015 0a.926.926 0 0 1 0-1.85.926.926 0 0 1 0 1.85Zm2.021-7.243-13.8.81-.57-6.341h15.753l-1.383 5.53Z","fill-rule":"nonzero"})],-1),E(" Add to cart ")])),y(e("span",{class:"product__cart-warning"},h(`${r(t).product.stock-r(s).totalInCart} items available to add to cart`),513),[[N,a.value>r(t).product.stock-r(s).totalInCart]])])])]),j(D,null,{default:O(()=>[r(t).showLightbox?(g(),V(Q,{key:0,images:r(t).product},null,8,["images"])):Z("",!0)]),_:1})]))}},ht={__name:"ProductPage",setup(d){return(t,s)=>(g(),b("main",null,[j(mt)]))}};export{ht as default};
